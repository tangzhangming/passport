import{r as N,a as H,o as F,j as M,b as t,c as o,d as n,w as e,s as S,N as T,f as i,k as V,l as W,m as j,F as z,i as A,n as D,g as p,t as P}from"./index-CVbj0m-9.js";const G={__name:"index",setup(R){const b=A(),_=N(!0);var g=H({});const y=a=>b.push({name:"dashboard"}),k=a=>{var r=600,c=650,d=(window.screen.height-30-c)/2,s=(window.screen.width-10-r)/2;window.open(a.bind_link,"newwindow","height="+c+",,innerHeight="+c+",width="+r+",innerWidth="+r+",top="+d+",left="+s+",toolbar=no,menubar=no,scrollbars=auto,resizeable=no,location=no,status=no")},m=async a=>{_.value=!0,g=(await S.get("/oauth/connects")).data.data.connects,_.value=!1},f=a=>{var r=a.origin;if(r==="https://passport.520.com"){if(a.data.message_type==null){console.log("收到未知消息: "),console.log(a.data);return}if(a.data.message_type=="provider_bind"){var c=a.data.provider_name,d=a.data.display_name;m(),T.success({position:"topLeft",title:"绑定成功",content:c+":"+d})}}};return F(async()=>{m(),window.addEventListener("message",f)}),M(()=>{console.log("移除oauth绑定监听 "),window.removeEventListener("message",f)}),(a,r)=>{const c=t("a-page-header"),d=t("icon-google"),s=t("a-avatar"),w=t("icon-github"),v=t("icon-qq"),q=t("icon-twitter"),C=t("icon-wechat"),x=t("a-list-item-meta"),h=t("a-button"),B=t("a-list-item"),L=t("a-list"),E=t("a-card");return o(),n(E,null,{default:e(()=>[i(c,{title:"社交网站绑定",subtitle:"",style:{background:"var(--color-bg-2)","margin-bottom":"0px"},onBack:y}),i(L,{bordered:!1,loading:_.value,style:{padding:"25px"}},{default:e(()=>[(o(!0),V(z,null,W(j(g),(u,l)=>(o(),n(B,null,D({default:e(()=>[i(x,{title:u.name,description:u.display_name},{avatar:e(()=>[l=="google"?(o(),n(s,{key:0,shape:"square",style:{backgroundColor:"#EC1A23"}},{default:e(()=>[i(d)]),_:1})):l=="github"?(o(),n(s,{key:1,shape:"square",style:{backgroundColor:"#232324"}},{default:e(()=>[i(w)]),_:1})):l=="qq"?(o(),n(s,{key:2,shape:"square",style:{backgroundColor:"#232324"}},{default:e(()=>[i(v)]),_:1})):l=="twitter"?(o(),n(s,{key:3,shape:"square",style:{backgroundColor:"#00acee"}},{default:e(()=>[i(q)]),_:1})):l=="weixin"?(o(),n(s,{key:4,shape:"square",style:{backgroundColor:"#04BE02"}},{default:e(()=>[i(C)]),_:1})):(o(),n(s,{key:5,shape:"square"},{default:e(()=>[p(P(l),1)]),_:2},1024))]),_:2},1032,["title","description"])]),_:2},[u.bind_status!=null?{name:"actions",fn:e(()=>[u.bind_status?(o(),n(h,{key:0,type:"outline",status:"danger"},{default:e(()=>[p("解绑")]),_:1})):(o(),n(h,{key:1,type:"outline",status:"success",onClick:U=>k(u)},{default:e(()=>[p("绑定")]),_:2},1032,["onClick"]))]),key:"0"}:void 0]),1024))),256))]),_:1},8,["loading"])]),_:1})}}};export{G as default};
