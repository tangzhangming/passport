import{r as N,a as H,o as F,j as M,b as t,c as o,d as n,w as e,s as S,N as T,f as i,k as V,l as W,m as j,F as z,i as A,n as D,g as p,t as P}from"./index-C6obk38n.js";const G={__name:"index",setup(R){const h=A(),u=N(!0);var g=H({});const b=a=>h.push({name:"dashboard"}),k=a=>{var r=600,c=650,_=(window.screen.height-30-c)/2,s=(window.screen.width-10-r)/2;window.open(a.bind_link,"newwindow","height="+c+",,innerHeight="+c+",width="+r+",innerWidth="+r+",top="+_+",left="+s+",toolbar=no,menubar=no,scrollbars=auto,resizeable=no,location=no,status=no")},w=async a=>{u.value=!0,g=(await S.get("/oauth/connects")).data.data.connects,u.value=!1},m=a=>{var r=a.origin;if(r==="https://passport.520.com"){if(a.data.message_type==null){console.log("收到未知消息: "),console.log(a.data);return}if(a.data.message_type=="provider_bind"){var c=a.data.provider_name;T.success({position:"topLeft",title:"社交账号绑定成功",content:"平台： "+c})}}};return F(async()=>{w(),window.addEventListener("message",m)}),M(()=>{console.log("移除oauth绑定监听 "),window.removeEventListener("message",m)}),(a,r)=>{const c=t("a-page-header"),_=t("icon-google"),s=t("a-avatar"),y=t("icon-github"),v=t("icon-qq"),q=t("icon-twitter"),C=t("icon-wechat"),x=t("a-list-item-meta"),f=t("a-button"),B=t("a-list-item"),L=t("a-list"),E=t("a-card");return o(),n(E,null,{default:e(()=>[i(c,{style:{background:"var(--color-bg-2)","margin-bottom":"0px"},title:"社交网站绑定",subtitle:!1,onBack:b}),i(L,{bordered:!1,loading:u.value,style:{padding:"25px"}},{default:e(()=>[(o(!0),V(z,null,W(j(g),(d,l)=>(o(),n(B,null,D({default:e(()=>[i(x,{title:d.name,description:d.display_name},{avatar:e(()=>[l=="google"?(o(),n(s,{key:0,shape:"square",style:{backgroundColor:"#EC1A23"}},{default:e(()=>[i(_)]),_:1})):l=="github"?(o(),n(s,{key:1,shape:"square",style:{backgroundColor:"#232324"}},{default:e(()=>[i(y)]),_:1})):l=="qq"?(o(),n(s,{key:2,shape:"square",style:{backgroundColor:"#232324"}},{default:e(()=>[i(v)]),_:1})):l=="twitter"?(o(),n(s,{key:3,shape:"square",style:{backgroundColor:"#00acee"}},{default:e(()=>[i(q)]),_:1})):l=="weixin"?(o(),n(s,{key:4,shape:"square",style:{backgroundColor:"#04BE02"}},{default:e(()=>[i(C)]),_:1})):(o(),n(s,{key:5,shape:"square"},{default:e(()=>[p(P(l),1)]),_:2},1024))]),_:2},1032,["title","description"])]),_:2},[d.bind_status!=null?{name:"actions",fn:e(()=>[d.bind_status?(o(),n(f,{key:0,type:"outline",status:"danger"},{default:e(()=>[p("解绑")]),_:1})):(o(),n(f,{key:1,type:"outline",status:"success",onClick:U=>k(d)},{default:e(()=>[p("绑定")]),_:2},1032,["onClick"]))]),key:"0"}:void 0]),1024))),256))]),_:1},8,["loading"])]),_:1})}}};export{G as default};
