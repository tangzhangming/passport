import{d as c,e as V,f as h,u as n,c as f,w as a,r as s,o as p,a as l,b as w,t as x,g as y,s as P,E as k}from"./index-D6VgDoLK.js";const I={__name:"index",setup(C){const m=c(!1),o=c(!1),e=V({name:"",email:""}),_=()=>{o.value=!0,P.put("/api/profile",e).then(function(t){o.value=!1,n().loadProfile(),k({title:"修改成功",message:t.data.message?t.data.message:"修改成功",type:"success"})}).catch(function(t){o.value=!1,console.log(t),n().loadProfile()})};return h(async()=>{await n().loadProfile(),e.name=n().userInfo.name,e.email=n().userInfo.email,m.value=!0}),(t,r)=>{const d=s("el-input"),u=s("el-form-item"),g=s("el-button"),v=s("el-form"),b=s("el-card");return p(),f(b,{shadow:"hover"},{default:a(()=>[m.value?(p(),f(v,{key:0,model:e,"label-width":"120px","label-position":"right",size:"large",style:{width:"450px"}},{default:a(()=>[l(u,{label:"昵称"},{default:a(()=>[l(d,{modelValue:e.name,"onUpdate:modelValue":r[0]||(r[0]=i=>e.name=i),placeholder:"昵称"},null,8,["modelValue"])]),_:1}),l(u,{label:"电子邮箱"},{default:a(()=>[l(d,{modelValue:e.email,"onUpdate:modelValue":r[1]||(r[1]=i=>e.email=i),placeholder:"邮箱"},null,8,["modelValue"])]),_:1}),l(u,{label:""},{default:a(()=>[l(g,{type:"primary",onClick:_,loading:o.value},{default:a(()=>[w(x(o.value?"提交中":"提交修改"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])):y("",!0)]),_:1})}}};export{I as default};
